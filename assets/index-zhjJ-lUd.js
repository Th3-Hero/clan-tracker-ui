var Gl=Object.defineProperty;var Pl=(t,e,l)=>e in t?Gl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var qe=(t,e,l)=>Pl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function l(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=l(a);fetch(a.href,n)}})();function me(){}function Tl(t){return t()}function ul(){return Object.create(null)}function Ie(t){t.forEach(Tl)}function Ol(t){return typeof t=="function"}function vt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Wl(t){return Object.keys(t).length===0}function jl(t,...e){if(t==null){for(const r of e)r(void 0);return me}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function Kl(t,e,l){t.$$.on_destroy.push(jl(e,l))}function o(t,e){t.appendChild(e)}function h(t,e,l){t.insertBefore(e,l||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function Rt(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function s(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function p(){return g(" ")}function he(){return g("")}function T(t,e,l,r){return t.addEventListener(e,l,r),()=>t.removeEventListener(e,l,r)}function c(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Ul(t){return Array.from(t.childNodes)}function j(t,e){e=""+e,t.data!==e&&(t.data=e)}function F(t,e){t.value=e??""}function dt(t,e,l){for(let r=0;r<t.options.length;r+=1){const a=t.options[r];if(a.__value===e){a.selected=!0;return}}(!l||e!==void 0)&&(t.selectedIndex=-1)}function fl(t){const e=t.querySelector(":checked");return e&&e.__value}let Qe;function He(t){Qe=t}function Vl(){if(!Qe)throw new Error("Function called outside component initialization");return Qe}function $l(t){Vl().$$.on_mount.push(t)}const We=[],dl=[];let Ke=[];const _l=[],Yl=Promise.resolve();let Tt=!1;function Jl(){Tt||(Tt=!0,Yl.then(Bl))}function Xe(t){Ke.push(t)}const It=new Set;let Ge=0;function Bl(){if(Ge!==0)return;const t=Qe;do{try{for(;Ge<We.length;){const e=We[Ge];Ge++,He(e),ql(e.$$)}}catch(e){throw We.length=0,Ge=0,e}for(He(null),We.length=0,Ge=0;dl.length;)dl.pop()();for(let e=0;e<Ke.length;e+=1){const l=Ke[e];It.has(l)||(It.add(l),l())}Ke.length=0}while(We.length);for(;_l.length;)_l.pop()();Tt=!1,It.clear(),He(t)}function ql(t){if(t.fragment!==null){t.update(),Ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Xe)}}function Hl(t){const e=[],l=[];Ke.forEach(r=>t.indexOf(r)===-1?e.push(r):l.push(r)),l.forEach(r=>r()),Ke=e}const bt=new Set;let Oe;function zl(){Oe={r:0,c:[],p:Oe}}function Ql(){Oe.r||Ie(Oe.c),Oe=Oe.p}function Ze(t,e){t&&t.i&&(bt.delete(t),t.i(e))}function ht(t,e,l,r){if(t&&t.o){if(bt.has(t))return;bt.add(t),Oe.c.push(()=>{bt.delete(t),r&&(l&&t.d(1),r())}),t.o(e)}else r&&r()}function je(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ml(t){t&&t.c()}function Ot(t,e,l){const{fragment:r,after_update:a}=t.$$;r&&r.m(e,l),Xe(()=>{const n=t.$$.on_mount.map(Tl).filter(Ol);t.$$.on_destroy?t.$$.on_destroy.push(...n):Ie(n),t.$$.on_mount=[]}),a.forEach(Xe)}function $t(t,e){const l=t.$$;l.fragment!==null&&(Hl(l.after_update),Ie(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function Xl(t,e){t.$$.dirty[0]===-1&&(We.push(t),Jl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Bt(t,e,l,r,a,n,i=null,_=[-1]){const d=Qe;He(t);const u=t.$$={fragment:null,ctx:[],props:n,update:me,not_equal:a,bound:ul(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:ul(),dirty:_,skip_bound:!1,root:e.target||d.$$.root};i&&i(u.root);let m=!1;if(u.ctx=l?l(t,e.props||{},(N,y,...D)=>{const S=D.length?D[0]:y;return u.ctx&&a(u.ctx[N],u.ctx[N]=S)&&(!u.skip_bound&&u.bound[N]&&u.bound[N](S),m&&Xl(t,N)),y}):[],u.update(),m=!0,Ie(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const N=Ul(e.target);u.fragment&&u.fragment.l(N),N.forEach(b)}else u.fragment&&u.fragment.c();e.intro&&Ze(t.$$.fragment),Ot(t,e.target,e.anchor),Bl()}He(d)}class Mt{constructor(){qe(this,"$$");qe(this,"$$set")}$destroy(){$t(this,1),this.$destroy=me}$on(e,l){if(!Ol(l))return me;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(l),()=>{const a=r.indexOf(l);a!==-1&&r.splice(a,1)}}$set(e){this.$$set&&!Wl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Zl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Zl);const xl={SERVER_URL:"https://clan-tracker-api.the-hero.dev"},yt=t=>t.skirmishDiff+t.advancesDiff+t.clanWarDiff,pl=t=>tn(t.rank.toLowerCase().replace("_"," ")),Dt=(t,e)=>{if(t===null||e===null)return 0;const l=24*60*60*1e3;return Math.round(Math.abs((t.getTime()-e.getTime())/l))},fe=t=>{const[e,l,r]=t.split("-").map(Number);return new Date(e,l-1,r)},De=t=>{const e=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${l}-${r}`},_t=t=>De(t).replace(" ","T");var H=(t=>(t[t.ASCENDING=0]="ASCENDING",t[t.DESCENDING=1]="DESCENDING",t))(H||{}),C=(t=>(t[t.NAME=0]="NAME",t[t.RANK=1]="RANK",t[t.JOINED=2]="JOINED",t[t.DAYS_IN_CLAN=3]="DAYS_IN_CLAN",t[t.LAST_BATTLE=4]="LAST_BATTLE",t[t.RANDOMS=5]="RANDOMS",t[t.SKIRMISH=6]="SKIRMISH",t[t.ADVANCES=7]="ADVANCES",t[t.CLAN_WARS=8]="CLAN_WARS",t[t.TOTAL_CLAN_BATTLES=9]="TOTAL_CLAN_BATTLES",t))(C||{});const en=["COMMANDER","EXECUTIVE_OFFICER","COMBAT_OFFICER","PERSONNEL_OFFICER","INTELLIGENCE_OFFICER","QUARTERMASTER","RECRUITMENT_OFFICER","JUNIOR_OFFICER","PRIVATE","RECRUIT","RESERVIST"],Lt=(t,e,l)=>{const r=a=>{switch(e){case 0:return a.name.toLowerCase();case 1:return en.toReversed().indexOf(a.rank);case 2:return new Date(a.joinedClan).getTime();case 3:return a.daysInClan;case 4:return new Date(a.lastBattle).getTime();case 5:return a.randomsDiff;case 6:return a.skirmishDiff;case 7:return a.advancesDiff;case 8:return a.clanWarDiff;case 9:return yt(a);default:return 0}};return l.sort((a,n)=>{const i=r(a),_=r(n);return i<_?t===0?-1:1:i>_?t===0?1:-1:0})},tn=t=>t.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");class Ft extends Error{constructor(l,r){super(l);qe(this,"response");this.name="FetchError",this.response=r}}class Fl extends Ft{constructor(l,r,a){super(l,r);qe(this,"problemDetail");this.name="DetailedFetchError",this.problemDetail=a}}const pt=xl.SERVER_URL,mt=async(t,e)=>{const l=await e.json();return l?new Fl(t,e,l):new Ft(t,e)};class ze{async getConfig(){const e=await fetch(`${pt}/data/config`);if(!e.ok)throw await mt("Failed to fetch config",e);return await e.json()}async getClanList(){const e=await fetch(`${pt}/data/clan-list`);if(!e.ok)throw await mt("Failed to fetch clan list",e);return await e.json()}async getClanActivity(e,l,r){let a=`${pt}/data/clan-activity/${e}`;l!==null&&r!==null&&(a+=`?&startDate=${_t(l)}&endDate=${_t(r)}`);const n=await fetch(a);if(!n.ok)throw await mt("Failed to fetch clan activity",n);const i=await n.json(),_={clan:i.clan,startDate:new Date(`${i.startDate}T00:00:00-05:00`),endDate:new Date(`${i.endDate}T00:00:00-05:00`),memberActivity:i.memberActivity};return _.memberActivity.forEach(d=>{d.joinedClan=new Date(d.joinedClan),d.lastBattle=new Date(d.lastBattle)}),_}async searchForPlayer(e,l,r){let a=`${pt}/data/player-activity/${e}?&startDate=${_t(l)}&endDate=${_t(r)}`;const n=await fetch(a);if(!n.ok)throw await mt("Failed to fetch player activity",n);const i=await n.json();return i.startDate=new Date(i.startDate),i.endDate=new Date(i.endDate),i}}function ml(t,e,l){const r=t.slice();return r[28]=e[l],r}function bl(t,e,l){const r=t.slice();return r[31]=e[l],r}function hl(t){let e,l=t[31].tag+"",r,a;return{c(){e=s("option"),r=g(l),e.__value=a=t[31].id,F(e,e.__value)},m(n,i){h(n,e,i),o(e,r)},p(n,i){i[0]&8&&l!==(l=n[31].tag+"")&&j(r,l),i[0]&8&&a!==(a=n[31].id)&&(e.__value=a,F(e,e.__value))},d(n){n&&b(e)}}}function yl(t){let e;function l(n,i){return n[6]===H.ASCENDING?nn:ln}let r=l(t),a=r(t);return{c(){a.c(),e=he()},m(n,i){a.m(n,i),h(n,e,i)},p(n,i){r!==(r=l(n))&&(a.d(1),a=r(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){n&&b(e),a.d(n)}}}function ln(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_up",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function nn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_down",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function Dl(t){let e;function l(n,i){return n[6]===H.ASCENDING?an:rn}let r=l(t),a=r(t);return{c(){a.c(),e=he()},m(n,i){a.m(n,i),h(n,e,i)},p(n,i){r!==(r=l(n))&&(a.d(1),a=r(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){n&&b(e),a.d(n)}}}function rn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_down",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function an(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_up",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function vl(t){let e;function l(n,i){return n[6]===H.ASCENDING?sn:on}let r=l(t),a=r(t);return{c(){a.c(),e=he()},m(n,i){a.m(n,i),h(n,e,i)},p(n,i){r!==(r=l(n))&&(a.d(1),a=r(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){n&&b(e),a.d(n)}}}function on(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_down",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function sn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_up",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function kl(t){let e;function l(n,i){return n[6]===H.ASCENDING?un:cn}let r=l(t),a=r(t);return{c(){a.c(),e=he()},m(n,i){a.m(n,i),h(n,e,i)},p(n,i){r!==(r=l(n))&&(a.d(1),a=r(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){n&&b(e),a.d(n)}}}function cn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_down",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function un(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_up",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function wl(t){let e;function l(n,i){return n[6]===H.ASCENDING?dn:fn}let r=l(t),a=r(t);return{c(){a.c(),e=he()},m(n,i){a.m(n,i),h(n,e,i)},p(n,i){r!==(r=l(n))&&(a.d(1),a=r(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){n&&b(e),a.d(n)}}}function fn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_down",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function dn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_up",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function Cl(t){let e;function l(n,i){return n[6]===H.ASCENDING?pn:_n}let r=l(t),a=r(t);return{c(){a.c(),e=he()},m(n,i){a.m(n,i),h(n,e,i)},p(n,i){r!==(r=l(n))&&(a.d(1),a=r(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){n&&b(e),a.d(n)}}}function _n(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_down",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function pn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_up",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function Al(t){let e;function l(n,i){return n[6]===H.ASCENDING?bn:mn}let r=l(t),a=r(t);return{c(){a.c(),e=he()},m(n,i){a.m(n,i),h(n,e,i)},p(n,i){r!==(r=l(n))&&(a.d(1),a=r(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){n&&b(e),a.d(n)}}}function mn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_down",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function bn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_up",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function gl(t){let e;function l(n,i){return n[6]===H.ASCENDING?yn:hn}let r=l(t),a=r(t);return{c(){a.c(),e=he()},m(n,i){a.m(n,i),h(n,e,i)},p(n,i){r!==(r=l(n))&&(a.d(1),a=r(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){n&&b(e),a.d(n)}}}function hn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_down",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function yn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_up",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function Nl(t){let e;function l(n,i){return n[6]===H.ASCENDING?vn:Dn}let r=l(t),a=r(t);return{c(){a.c(),e=he()},m(n,i){a.m(n,i),h(n,e,i)},p(n,i){r!==(r=l(n))&&(a.d(1),a=r(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){n&&b(e),a.d(n)}}}function Dn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_down",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function vn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_up",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function El(t){let e;function l(n,i){return n[6]===H.ASCENDING?wn:kn}let r=l(t),a=r(t);return{c(){a.c(),e=he()},m(n,i){a.m(n,i),h(n,e,i)},p(n,i){r!==(r=l(n))&&(a.d(1),a=r(n),a&&(a.c(),a.m(e.parentNode,e)))},d(n){n&&b(e),a.d(n)}}}function kn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_down",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function wn(t){let e;return{c(){e=s("span"),e.textContent="keyboard_arrow_up",c(e,"class","material-symbols-outlined sort-arrow")},m(l,r){h(l,e,r)},d(l){l&&b(e)}}}function Sl(t){let e,l,r=t[28].name+"",a,n,i,_=pl(t[28])+"",d,u,m,N=De(t[28].joinedClan)+"",y,D,S,A=t[28].daysInClan+"",k,Y,$,K=De(t[28].lastBattle)+"",X,M,J,B=t[28].randomsDiff+"",q,de,v,L=t[28].skirmishDiff+"",z,ee,Q,E=t[28].advancesDiff+"",U,O,I,P=t[28].clanWarDiff+"",$e,be,Le,pe=yt(t[28])+"",Re,Ue,_e;return{c(){e=s("tr"),l=s("td"),a=g(r),n=p(),i=s("td"),d=g(_),u=p(),m=s("td"),y=g(N),D=p(),S=s("td"),k=g(A),Y=p(),$=s("td"),X=g(K),M=p(),J=s("td"),q=g(B),de=p(),v=s("td"),z=g(L),ee=p(),Q=s("td"),U=g(E),O=p(),I=s("td"),$e=g(P),be=p(),Le=s("td"),Re=g(pe),Ue=p(),c(l,"class","table-cell"),c(i,"class","table-cell"),c(m,"class","table-cell"),c(S,"class","table-cell"),c($,"class","table-cell"),c(J,"class","table-cell"),c(v,"class","table-cell"),c(Q,"class","table-cell"),c(I,"class","table-cell"),c(Le,"class","table-cell"),c(e,"class",_e=t[7](t[28]))},m(V,W){h(V,e,W),o(e,l),o(l,a),o(e,n),o(e,i),o(i,d),o(e,u),o(e,m),o(m,y),o(e,D),o(e,S),o(S,k),o(e,Y),o(e,$),o($,X),o(e,M),o(e,J),o(J,q),o(e,de),o(e,v),o(v,z),o(e,ee),o(e,Q),o(Q,U),o(e,O),o(e,I),o(I,$e),o(e,be),o(e,Le),o(Le,Re),o(e,Ue)},p(V,W){W[0]&1&&r!==(r=V[28].name+"")&&j(a,r),W[0]&1&&_!==(_=pl(V[28])+"")&&j(d,_),W[0]&1&&N!==(N=De(V[28].joinedClan)+"")&&j(y,N),W[0]&1&&A!==(A=V[28].daysInClan+"")&&j(k,A),W[0]&1&&K!==(K=De(V[28].lastBattle)+"")&&j(X,K),W[0]&1&&B!==(B=V[28].randomsDiff+"")&&j(q,B),W[0]&1&&L!==(L=V[28].skirmishDiff+"")&&j(z,L),W[0]&1&&E!==(E=V[28].advancesDiff+"")&&j(U,E),W[0]&1&&P!==(P=V[28].clanWarDiff+"")&&j($e,P),W[0]&1&&pe!==(pe=yt(V[28])+"")&&j(Re,pe),W[0]&1&&_e!==(_e=V[7](V[28]))&&c(e,"class",_e)},d(V){V&&b(e)}}}function Cn(t){let e,l,r,a,n,i,_,d,u,m,N,y,D,S,A,k,Y,$,K,X,M,J,B,q,de,v,L,z,ee,Q,E,U,O,I,P,$e,be,Le,pe,Re,Ue,_e,V,W,kt,Gt,xe,et=Dt(t[0].startDate,t[0].endDate)+"",wt,Pt,Wt,Be,Ct,jt,At,tt=t[0].memberActivity.length+"",gt,Kt,Te,G,lt,ye,Ut,Vt,nt,ve,Yt,Jt,rt,ke,qt,Ht,at,we,zt,Qt,ot,Ce,Xt,Zt,it,Ae,xt,el,st,ge,tl,ll,ct,Ne,nl,rl,ut,Ee,al,ol,ft,Se,il,sl,Nt,Ve,Et,Ye,St,cl,Me=je(t[3]),Z=[];for(let f=0;f<Me.length;f+=1)Z[f]=hl(bl(t,Me,f));let te=t[5]===C.NAME&&yl(t),le=t[5]===C.RANK&&Dl(t),ne=t[5]===C.JOINED&&vl(t),re=t[5]===C.DAYS_IN_CLAN&&kl(t),ae=t[5]===C.LAST_BATTLE&&wl(t),oe=t[5]===C.RANDOMS&&Cl(t),ie=t[5]===C.SKIRMISH&&Al(t),se=t[5]===C.ADVANCES&&gl(t),ce=t[5]===C.CLAN_WARS&&Nl(t),ue=t[5]===C.TOTAL_CLAN_BATTLES&&El(t),Fe=je(t[0].memberActivity),x=[];for(let f=0;f<Fe.length;f+=1)x[f]=Sl(ml(t,Fe,f));return{c(){e=s("div"),l=s("div"),r=s("div"),r.textContent="Activity Summary",a=p(),n=s("div"),i=s("div"),_=s("div"),_.textContent="Select Clan",d=p(),u=s("select"),m=s("option"),m.textContent="Select Clan:";for(let f=0;f<Z.length;f+=1)Z[f].c();N=p(),y=s("div"),D=s("div"),S=s("div"),S.textContent="Good",A=p(),k=s("input"),Y=p(),$=s("div"),K=s("div"),K.textContent="Poor",X=p(),M=s("input"),J=p(),B=s("div"),q=s("div"),q.textContent="Color By",de=p(),v=s("select"),L=s("option"),L.textContent="Color By:",z=s("option"),z.textContent="Randoms",ee=s("option"),ee.textContent="Skirmish",Q=s("option"),Q.textContent="Advances",E=s("option"),E.textContent="Clan War",U=s("option"),U.textContent="Total Clan Battles",O=p(),I=s("div"),P=s("div"),P.textContent="Start Date",$e=p(),be=s("input"),Le=p(),pe=s("div"),Re=s("div"),Re.textContent="End Date",Ue=p(),_e=s("input"),V=p(),W=s("div"),kt=s("div"),kt.textContent="Date Range",Gt=p(),xe=s("div"),wt=g(et),Pt=g(" days"),Wt=p(),Be=s("div"),Ct=s("div"),Ct.textContent="Members",jt=p(),At=s("div"),gt=g(tt),Kt=p(),Te=s("table"),G=s("tr"),lt=s("th"),ye=s("button"),Ut=g(`Name\r
                    `),te&&te.c(),Vt=p(),nt=s("th"),ve=s("button"),Yt=g(`Rank\r
                    `),le&&le.c(),Jt=p(),rt=s("th"),ke=s("button"),qt=g(`Joined Clan\r
                    `),ne&&ne.c(),Ht=p(),at=s("th"),we=s("button"),zt=g(`Days in Clan\r
                    `),re&&re.c(),Qt=p(),ot=s("th"),Ce=s("button"),Xt=g(`Last Battle\r
                    `),ae&&ae.c(),Zt=p(),it=s("th"),Ae=s("button"),xt=g(`Randoms\r
                    `),oe&&oe.c(),el=p(),st=s("th"),ge=s("button"),tl=g(`Skirmish\r
                    `),ie&&ie.c(),ll=p(),ct=s("th"),Ne=s("button"),nl=g(`Advances\r
                    `),se&&se.c(),rl=p(),ut=s("th"),Ee=s("button"),al=g(`Clan War\r
                    `),ce&&ce.c(),ol=p(),ft=s("th"),Se=s("button"),il=g(`Total Clan Battles\r
                    `),ue&&ue.c(),sl=p();for(let f=0;f<x.length;f+=1)x[f].c();Nt=p(),Ve=s("link"),Et=p(),Ye=s("link"),c(r,"class","title"),m.disabled=!0,m.__value="Select Clan:",F(m,m.__value),t[4]===void 0&&Xe(()=>t[11].call(u)),c(i,"class","control"),c(k,"type","text"),c(k,"placeholder","Good"),c(D,"class","control"),c(M,"type","text"),c(M,"placeholder","Poor"),c($,"class","control"),c(y,"class","performance-controls"),L.disabled=!0,L.__value="Color By:",F(L,L.__value),z.__value="randoms",F(z,z.__value),ee.__value="skirmish",F(ee,ee.__value),Q.__value="advances",F(Q,Q.__value),E.__value="clan_war",F(E,E.__value),U.__value="total_clan_battles",F(U,U.__value),U.selected=!0,t[1]===void 0&&Xe(()=>t[14].call(v)),c(B,"class","control"),c(be,"type","date"),c(I,"class","control"),c(_e,"type","date"),c(pe,"class","control"),c(W,"class","control"),c(Be,"class","control"),c(n,"class","controls-container"),c(l,"class","top-bar"),c(ye,"type","button"),ye.value=C.NAME,c(ye,"class","table-cell table-header-cell"),c(lt,"class","table-row-header"),c(ve,"type","button"),c(ve,"class","table-cell table-header-cell"),c(nt,"class","table-row-header"),c(ke,"type","button"),c(ke,"class","table-cell table-header-cell"),c(rt,"class","table-row-header"),c(we,"type","button"),c(we,"class","table-cell table-header-cell"),c(at,"class","table-row-header"),c(Ce,"type","button"),c(Ce,"class","table-cell table-header-cell"),c(ot,"class","table-row-header"),c(Ae,"type","button"),c(Ae,"class","table-cell table-header-cell"),c(it,"class","table-row-header"),c(ge,"type","button"),c(ge,"class","table-cell table-header-cell"),c(st,"class","table-row-header"),c(Ne,"type","button"),c(Ne,"class","table-cell table-header-cell"),c(ct,"class","table-row-header"),c(Ee,"type","button"),c(Ee,"class","table-cell table-header-cell"),c(ut,"class","table-row-header"),c(Se,"type","button"),c(Se,"class","table-cell table-header-cell"),c(ft,"class","table-row-header"),c(G,"class","table-header"),c(Te,"class","table-container"),c(e,"class","page-container"),c(Ve,"rel","stylesheet"),c(Ve,"href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"),c(Ye,"rel","stylesheet"),c(Ye,"href","https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0")},m(f,R){h(f,e,R),o(e,l),o(l,r),o(l,a),o(l,n),o(n,i),o(i,_),o(i,d),o(i,u),o(u,m);for(let w=0;w<Z.length;w+=1)Z[w]&&Z[w].m(u,null);dt(u,t[4],!0),o(n,N),o(n,y),o(y,D),o(D,S),o(D,A),o(D,k),F(k,t[2].good),o(y,Y),o(y,$),o($,K),o($,X),o($,M),F(M,t[2].poor),o(n,J),o(n,B),o(B,q),o(B,de),o(B,v),o(v,L),o(v,z),o(v,ee),o(v,Q),o(v,E),o(v,U),dt(v,t[1],!0),o(n,O),o(n,I),o(I,P),o(I,$e),o(I,be),F(be,t[2].startDate),o(n,Le),o(n,pe),o(pe,Re),o(pe,Ue),o(pe,_e),F(_e,t[2].endDate),o(n,V),o(n,W),o(W,kt),o(W,Gt),o(W,xe),o(xe,wt),o(xe,Pt),o(n,Wt),o(n,Be),o(Be,Ct),o(Be,jt),o(Be,At),o(At,gt),o(e,Kt),o(e,Te),o(Te,G),o(G,lt),o(lt,ye),o(ye,Ut),te&&te.m(ye,null),o(G,Vt),o(G,nt),o(nt,ve),o(ve,Yt),le&&le.m(ve,null),o(G,Jt),o(G,rt),o(rt,ke),o(ke,qt),ne&&ne.m(ke,null),o(G,Ht),o(G,at),o(at,we),o(we,zt),re&&re.m(we,null),o(G,Qt),o(G,ot),o(ot,Ce),o(Ce,Xt),ae&&ae.m(Ce,null),o(G,Zt),o(G,it),o(it,Ae),o(Ae,xt),oe&&oe.m(Ae,null),o(G,el),o(G,st),o(st,ge),o(ge,tl),ie&&ie.m(ge,null),o(G,ll),o(G,ct),o(ct,Ne),o(Ne,nl),se&&se.m(Ne,null),o(G,rl),o(G,ut),o(ut,Ee),o(Ee,al),ce&&ce.m(Ee,null),o(G,ol),o(G,ft),o(ft,Se),o(Se,il),ue&&ue.m(Se,null),o(Te,sl);for(let w=0;w<x.length;w+=1)x[w]&&x[w].m(Te,null);h(f,Nt,R),h(f,Ve,R),h(f,Et,R),h(f,Ye,R),St||(cl=[T(u,"change",t[11]),T(u,"change",t[9]),T(k,"input",t[12]),T(M,"input",t[13]),T(v,"change",t[14]),T(be,"input",t[15]),T(be,"change",t[10]),T(_e,"input",t[16]),T(_e,"change",t[10]),T(ye,"click",t[17]),T(ve,"click",t[18]),T(ke,"click",t[19]),T(we,"click",t[20]),T(Ce,"click",t[21]),T(Ae,"click",t[22]),T(ge,"click",t[23]),T(Ne,"click",t[24]),T(Ee,"click",t[25]),T(Se,"click",t[26])],St=!0)},p(f,R){if(R[0]&8){Me=je(f[3]);let w;for(w=0;w<Me.length;w+=1){const Je=bl(f,Me,w);Z[w]?Z[w].p(Je,R):(Z[w]=hl(Je),Z[w].c(),Z[w].m(u,null))}for(;w<Z.length;w+=1)Z[w].d(1);Z.length=Me.length}if(R[0]&24&&dt(u,f[4]),R[0]&4&&k.value!==f[2].good&&F(k,f[2].good),R[0]&4&&M.value!==f[2].poor&&F(M,f[2].poor),R[0]&2&&dt(v,f[1]),R[0]&4&&F(be,f[2].startDate),R[0]&4&&F(_e,f[2].endDate),R[0]&1&&et!==(et=Dt(f[0].startDate,f[0].endDate)+"")&&j(wt,et),R[0]&1&&tt!==(tt=f[0].memberActivity.length+"")&&j(gt,tt),f[5]===C.NAME?te?te.p(f,R):(te=yl(f),te.c(),te.m(ye,null)):te&&(te.d(1),te=null),f[5]===C.RANK?le?le.p(f,R):(le=Dl(f),le.c(),le.m(ve,null)):le&&(le.d(1),le=null),f[5]===C.JOINED?ne?ne.p(f,R):(ne=vl(f),ne.c(),ne.m(ke,null)):ne&&(ne.d(1),ne=null),f[5]===C.DAYS_IN_CLAN?re?re.p(f,R):(re=kl(f),re.c(),re.m(we,null)):re&&(re.d(1),re=null),f[5]===C.LAST_BATTLE?ae?ae.p(f,R):(ae=wl(f),ae.c(),ae.m(Ce,null)):ae&&(ae.d(1),ae=null),f[5]===C.RANDOMS?oe?oe.p(f,R):(oe=Cl(f),oe.c(),oe.m(Ae,null)):oe&&(oe.d(1),oe=null),f[5]===C.SKIRMISH?ie?ie.p(f,R):(ie=Al(f),ie.c(),ie.m(ge,null)):ie&&(ie.d(1),ie=null),f[5]===C.ADVANCES?se?se.p(f,R):(se=gl(f),se.c(),se.m(Ne,null)):se&&(se.d(1),se=null),f[5]===C.CLAN_WARS?ce?ce.p(f,R):(ce=Nl(f),ce.c(),ce.m(Ee,null)):ce&&(ce.d(1),ce=null),f[5]===C.TOTAL_CLAN_BATTLES?ue?ue.p(f,R):(ue=El(f),ue.c(),ue.m(Se,null)):ue&&(ue.d(1),ue=null),R[0]&129){Fe=je(f[0].memberActivity);let w;for(w=0;w<Fe.length;w+=1){const Je=ml(f,Fe,w);x[w]?x[w].p(Je,R):(x[w]=Sl(Je),x[w].c(),x[w].m(Te,null))}for(;w<x.length;w+=1)x[w].d(1);x.length=Fe.length}},i:me,o:me,d(f){f&&(b(e),b(Nt),b(Ve),b(Et),b(Ye)),Rt(Z,f),te&&te.d(),le&&le.d(),ne&&ne.d(),re&&re.d(),ae&&ae.d(),oe&&oe.d(),ie&&ie.d(),se&&se.d(),ce&&ce.d(),ue&&ue.d(),Rt(x,f),St=!1,Ie(cl)}}}function An(t,e,l){let r,a={clan:null,endDate:null,startDate:null,memberActivity:[]},n=[],i,_,d=C.TOTAL_CLAN_BATTLES,u=H.ASCENDING,m={good:0,poor:0,startDate:"",endDate:""};const N=E=>{const O=P=>P/7*r.defaultActivitySummaryDateRange,I=P=>P>=O(m.good)?"performance-good":P>=O(m.poor)?"performance-poor":"performance-bad";switch(_){case"randoms":return I(E.randomsDiff);case"skirmish":return I(E.skirmishDiff);case"advances":return I(E.advancesDiff);case"clan_war":return I(E.clanWarDiff);case"total_clan_battles":return I(yt(E));default:return"performance-bad"}},y=E=>{d===E?l(6,u=u===H.ASCENDING?H.DESCENDING:H.ASCENDING):(l(5,d=E),d===C.NAME?l(6,u=H.ASCENDING):l(6,u=H.DESCENDING)),l(0,a.memberActivity=Lt(u,d,a.memberActivity),a)},D=async()=>{const E=new ze,U=fe(m.startDate),O=fe(m.endDate);l(0,a=await E.getClanActivity(i,U,O)),l(0,a.memberActivity=Lt(u,d,a.memberActivity),a)},S=async()=>{const E=new ze,U=fe(m.startDate),O=fe(m.endDate);l(0,a=await E.getClanActivity(i,U,O)),l(0,a.memberActivity=Lt(u,d,a.memberActivity),a)};$l(async()=>{const E=new ze;r=await E.getConfig(),l(3,n=await E.getClanList()),n.length===0&&console.error("No clans found"),l(4,i=n[0].id),l(0,a=await E.getClanActivity(i,null,null)),l(2,m={good:r.defaultPerformanceThresholdGood,poor:r.defaultPerformanceThresholdPoor,startDate:De(a.startDate),endDate:De(a.endDate)}),y(C.TOTAL_CLAN_BATTLES)});function A(){i=fl(this),l(4,i),l(3,n)}function k(){m.good=this.value,l(2,m)}function Y(){m.poor=this.value,l(2,m)}function $(){_=fl(this),l(1,_)}function K(){m.startDate=this.value,l(2,m)}function X(){m.endDate=this.value,l(2,m)}const M=()=>y(C.NAME),J=()=>y(C.RANK),B=()=>y(C.JOINED),q=()=>y(C.DAYS_IN_CLAN),de=()=>y(C.LAST_BATTLE),v=()=>y(C.RANDOMS),L=()=>y(C.SKIRMISH),z=()=>y(C.ADVANCES),ee=()=>y(C.CLAN_WARS),Q=()=>y(C.TOTAL_CLAN_BATTLES);return t.$$.update=()=>{t.$$.dirty[0]&7&&(_||m)&&l(0,a={...a})},[a,_,m,n,i,d,u,N,y,D,S,A,k,Y,$,K,X,M,J,B,q,de,v,L,z,ee,Q]}class gn extends Mt{constructor(e){super(),Bt(this,e,An,Cn,vt,{},null,[-1,-1])}}const Pe=[];function Nn(t,e=me){let l;const r=new Set;function a(_){if(vt(t,_)&&(t=_,l)){const d=!Pe.length;for(const u of r)u[1](),Pe.push(u,t);if(d){for(let u=0;u<Pe.length;u+=2)Pe[u][0](Pe[u+1]);Pe.length=0}}}function n(_){a(_(t))}function i(_,d=me){const u=[_,d];return r.add(u),r.size===1&&(l=e(a,n)||me),_(t),()=>{r.delete(u),r.size===0&&l&&(l(),l=null)}}return{set:a,update:n,subscribe:i}}function Il(t,e,l){const r=t.slice();return r[10]=e[l],r}function Ll(t){let e,l,r,a=je(t[0].playerInfo),n=[];for(let i=0;i<a.length;i+=1)n[i]=Rl(Il(t,a,i));return{c(){e=s("table"),l=s("tr"),l.innerHTML='<th class="table-row-header">Name</th> <th class="table-row-header">Randoms</th> <th class="table-row-header">Skirmish</th> <th class="table-row-header">Advances</th> <th class="table-row-header">Clan War</th> <th class="table-row-header">Total Clan Battles</th>',r=p();for(let i=0;i<n.length;i+=1)n[i].c();c(l,"class","table-header"),c(e,"class","table-container")},m(i,_){h(i,e,_),o(e,l),o(e,r);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null)},p(i,_){if(_&1){a=je(i[0].playerInfo);let d;for(d=0;d<a.length;d+=1){const u=Il(i,a,d);n[d]?n[d].p(u,_):(n[d]=Rl(u),n[d].c(),n[d].m(e,null))}for(;d<n.length;d+=1)n[d].d(1);n.length=a.length}},d(i){i&&b(e),Rt(n,i)}}}function Rl(t){let e,l,r=t[10].name+"",a,n,i,_=t[10].randomsDiff+"",d,u,m,N=t[10].skirmishDiff+"",y,D,S,A=t[10].advancesDiff+"",k,Y,$,K=t[10].clanWarDiff+"",X,M,J,B=t[10].advancesDiff+t[10].skirmishDiff+t[10].clanWarDiff+"",q,de;return{c(){e=s("tr"),l=s("td"),a=g(r),n=p(),i=s("td"),d=g(_),u=p(),m=s("td"),y=g(N),D=p(),S=s("td"),k=g(A),Y=p(),$=s("td"),X=g(K),M=p(),J=s("td"),q=g(B),de=p(),c(l,"class","table-cell svelte-e4ow3n"),c(i,"class","table-cell svelte-e4ow3n"),c(m,"class","table-cell svelte-e4ow3n"),c(S,"class","table-cell svelte-e4ow3n"),c($,"class","table-cell svelte-e4ow3n"),c(J,"class","table-cell svelte-e4ow3n")},m(v,L){h(v,e,L),o(e,l),o(l,a),o(e,n),o(e,i),o(i,d),o(e,u),o(e,m),o(m,y),o(e,D),o(e,S),o(S,k),o(e,Y),o(e,$),o($,X),o(e,M),o(e,J),o(J,q),o(e,de)},p(v,L){L&1&&r!==(r=v[10].name+"")&&j(a,r),L&1&&_!==(_=v[10].randomsDiff+"")&&j(d,_),L&1&&N!==(N=v[10].skirmishDiff+"")&&j(y,N),L&1&&A!==(A=v[10].advancesDiff+"")&&j(k,A),L&1&&K!==(K=v[10].clanWarDiff+"")&&j(X,K),L&1&&B!==(B=v[10].advancesDiff+v[10].skirmishDiff+v[10].clanWarDiff+"")&&j(q,B)},d(v){v&&b(e)}}}function En(t){let e,l,r,a,n,i,_,d,u,m,N,y,D,S,A,k,Y,$,K,X,M,J,B,q,de,v,L=Dt(fe(t[1].startDate),fe(t[1].endDate))+"",z,ee,Q,E,U,O=t[0]!==void 0&&Ll(t);return{c(){e=s("div"),l=s("div"),r=s("div"),r.textContent="Player Search",a=p(),n=s("div"),i=s("div"),_=s("div"),_.textContent="Search Player",d=p(),u=s("input"),m=p(),N=s("button"),N.textContent="Search",y=p(),D=s("div"),S=s("div"),S.textContent="Start Date",A=p(),k=s("input"),Y=p(),$=s("div"),K=s("div"),K.textContent="End Date",X=p(),M=s("input"),J=p(),B=s("div"),q=s("div"),q.textContent="Date Range",de=p(),v=s("div"),z=g(L),ee=g(`\r
                    days`),Q=p(),O&&O.c(),c(r,"class","title"),c(u,"class","player-search-input svelte-e4ow3n"),c(u,"type","text"),c(u,"placeholder","Name or ID"),c(i,"class","control"),c(k,"type","date"),c(D,"class","control"),c(M,"type","date"),c($,"class","control"),c(B,"class","control"),c(n,"class","controls-container"),c(l,"class","top-bar"),c(e,"class","page-container")},m(I,P){h(I,e,P),o(e,l),o(l,r),o(l,a),o(l,n),o(n,i),o(i,_),o(i,d),o(i,u),F(u,t[1].playerSearchInput),o(i,m),o(i,N),o(n,y),o(n,D),o(D,S),o(D,A),o(D,k),F(k,t[1].startDate),o(n,Y),o(n,$),o($,K),o($,X),o($,M),F(M,t[1].endDate),o(n,J),o(n,B),o(B,q),o(B,de),o(B,v),o(v,z),o(v,ee),o(e,Q),O&&O.m(e,null),E||(U=[T(u,"input",t[5]),T(u,"keydown",t[4]),T(N,"click",t[2]),T(k,"input",t[6]),T(k,"change",t[3]),T(M,"input",t[7]),T(M,"change",t[3])],E=!0)},p(I,[P]){P&2&&u.value!==I[1].playerSearchInput&&F(u,I[1].playerSearchInput),P&2&&F(k,I[1].startDate),P&2&&F(M,I[1].endDate),P&2&&L!==(L=Dt(fe(I[1].startDate),fe(I[1].endDate))+"")&&j(z,L),I[0]!==void 0?O?O.p(I,P):(O=Ll(I),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},i:me,o:me,d(I){I&&b(e),O&&O.d(),E=!1,Ie(U)}}}function Sn(t,e,l){let r,a,n={startDate:"",endDate:"",playerSearchInput:""};const i=async()=>{const D=new ze,S=fe(n.startDate),A=fe(n.endDate);try{l(0,a=await D.searchForPlayer(n.playerSearchInput,S,A))}catch(k){k instanceof Fl?alert(k.problemDetail.detail):k instanceof Ft?alert(k.message):alert("Error searching for player.")}},_=async()=>{if(n.playerSearchInput.trim()===""){alert("Player name cannot be blank.");return}if(fe(n.startDate)>fe(n.endDate)){alert("Start date must be before end date.");return}await i()},d=async()=>{if(n.playerSearchInput.trim()!==""){if(fe(n.startDate)>fe(n.endDate)){alert("Start date must be before end date.");return}await i()}},u=async D=>{D.key==="Enter"&&await _()};$l(async()=>{r=await new ze().getConfig();let S=new Date,A=new Date(S);A.setDate(S.getDate()-r.defaultActivitySummaryDateRange),l(1,n={startDate:De(A),endDate:De(S),playerSearchInput:""})});function m(){n.playerSearchInput=this.value,l(1,n)}function N(){n.startDate=this.value,l(1,n)}function y(){n.endDate=this.value,l(1,n)}return[a,n,_,d,u,m,N,y]}class In extends Mt{constructor(e){super(),Bt(this,e,Sn,En,vt,{})}}function Ln(t){let e,l;return e=new In({}),{c(){Ml(e.$$.fragment)},m(r,a){Ot(e,r,a),l=!0},i(r){l||(Ze(e.$$.fragment,r),l=!0)},o(r){ht(e.$$.fragment,r),l=!1},d(r){$t(e,r)}}}function Rn(t){let e,l;return e=new gn({}),{c(){Ml(e.$$.fragment)},m(r,a){Ot(e,r,a),l=!0},i(r){l||(Ze(e.$$.fragment,r),l=!0)},o(r){ht(e.$$.fragment,r),l=!1},d(r){$t(e,r)}}}function Tn(t){let e,l,r,a,n,i,_,d,u,m,N;const y=[Rn,Ln],D=[];function S(A,k){return A[0]==="activity-summary"?0:A[0]==="player-search"?1:-1}return~(_=S(t))&&(d=D[_]=y[_](t)),{c(){e=s("div"),l=s("div"),r=s("button"),r.textContent="Activity Summary",a=p(),n=s("button"),n.textContent="Player Search",i=p(),d&&d.c(),c(r,"class","svelte-4wcse8"),c(n,"class","svelte-4wcse8"),c(l,"class","navbar svelte-4wcse8"),c(e,"class","main-container svelte-4wcse8")},m(A,k){h(A,e,k),o(e,l),o(l,r),o(l,a),o(l,n),o(e,i),~_&&D[_].m(e,null),u=!0,m||(N=[T(r,"click",t[2]),T(n,"click",t[3])],m=!0)},p(A,[k]){let Y=_;_=S(A),_!==Y&&(d&&(zl(),ht(D[Y],1,1,()=>{D[Y]=null}),Ql()),~_?(d=D[_],d||(d=D[_]=y[_](A),d.c()),Ze(d,1),d.m(e,null)):d=null)},i(A){u||(Ze(d),u=!0)},o(A){ht(d),u=!1},d(A){A&&b(e),~_&&D[_].d(),m=!1,Ie(N)}}}function On(t,e,l){let r;const a=Nn("activity-summary");return Kl(t,a,_=>l(0,r=_)),[r,a,()=>a.set("activity-summary"),()=>a.set("player-search")]}class $n extends Mt{constructor(e){super(),Bt(this,e,On,Tn,vt,{})}}new $n({target:document.getElementById("app")});
